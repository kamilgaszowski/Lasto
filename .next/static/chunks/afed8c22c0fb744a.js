(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var s=e.i(43476),a=e.i(71645);let t=()=>(0,s.jsx)("span",{className:"icon-md icon-bold icon-square",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M16 4l-10 8 10 8"})})}),n=()=>(0,s.jsx)("span",{className:"icon-md icon-bold icon-square",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M8 4l10 8-10 8"})})}),l=()=>(0,s.jsx)("span",{className:"icon-xl icon-thin",children:(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,s.jsx)("path",{d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378.138.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),(0,s.jsx)("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i=()=>(0,s.jsx)("span",{className:"icon-md icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),r=()=>(0,s.jsx)("span",{className:"icon-md icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M4.5 12.75l6 6 9-13.5"})})}),c=()=>(0,s.jsx)("span",{className:"icon-lg icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})}),o=()=>(0,s.jsx)("span",{className:"icon-md icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),d=()=>(0,s.jsx)("span",{className:"icon-md icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})})}),m=()=>(0,s.jsx)("span",{className:"icon-md icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})})}),h=()=>(0,s.jsx)("span",{className:"icon-lg icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})}),p=()=>(0,s.jsx)("span",{className:"icon-sm icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})})}),u=()=>(0,s.jsx)("span",{className:"icon-sm icon-normal",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})})}),j="recordings",x=()=>new Promise((e,s)=>{let a=indexedDB.open("LastoDB",1);a.onupgradeneeded=e=>{let s=e.target.result;s.objectStoreNames.contains(j)||s.createObjectStore(j,{keyPath:"id"})},a.onsuccess=()=>e(a.result),a.onerror=()=>s(a.error)}),y=async e=>{let s=await x();return new Promise((a,t)=>{let n=s.transaction(j,"readwrite");n.objectStore(j).put(e),n.oncomplete=()=>a(),n.onerror=()=>t(n.error)})},g=async()=>{let e=await x();return new Promise((s,a)=>{let t=e.transaction(j,"readonly").objectStore(j).getAll();t.onsuccess=()=>s(t.result),t.onerror=()=>a(t.error)})},v=async e=>{let s=await x();return new Promise((a,t)=>{let n=s.transaction(j,"readwrite");n.objectStore(j).delete(e),n.oncomplete=()=>a(),n.onerror=()=>t(n.error)})},N=e=>e.map(e=>({id:e.id,ti:e.title,da:e.date,sn:e.speakerNames,u:e.utterances?.map(e=>({s:e.speaker,t:e.text}))||[]}));function b(){let[e,b]=(0,a.useState)(""),[k,w]=(0,a.useState)(""),[f,C]=(0,a.useState)([]),[z,S]=(0,a.useState)(null),[A,I]=(0,a.useState)(""),[B,O]=(0,a.useState)(!1),[T,P]=(0,a.useState)(!1),[D,M]=(0,a.useState)(""),[L,$]=(0,a.useState)(!1),[K,E]=(0,a.useState)(!1),[H,W]=(0,a.useState)(!1),[R,U]=(0,a.useState)(null),[_,J]=(0,a.useState)({isOpen:!1,title:"",message:""}),[V,F]=(0,a.useState)(!1),[G,Z]=(0,a.useState)(""),[q,Y]=(0,a.useState)("light"),[Q,X]=(0,a.useState)(!1),[ee,es]=(0,a.useState)(!1),[ea,et]=(0,a.useState)(!1),[en,el]=(0,a.useState)(!1),ei=(0,a.useRef)(null),[er,ec]=(0,a.useState)(!1),eo=(0,a.useRef)(null);(0,a.useEffect)(()=>{b(localStorage.getItem("assemblyAIKey")||""),w(localStorage.getItem("pantryId")||""),navigator.storage&&navigator.storage.persist&&navigator.storage.persist().then(e=>console.log("Storage persistent:",e)),(async()=>{try{let e=localStorage.getItem("lastoHistory");if(e){try{let s=JSON.parse(e);if(Array.isArray(s)&&s.length>0)for(let e of s)await y(e)}catch(e){}localStorage.removeItem("lastoHistory")}let s=(await g()).sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime());C(s)}catch(e){console.error("Błąd bazy danych:",e)}})();let e=localStorage.getItem("lastoTheme");e?Y(e):window.matchMedia("(prefers-color-scheme: dark)").matches&&Y("dark")},[]),(0,a.useEffect)(()=>{$(window.innerWidth>=768)},[]),(0,a.useEffect)(()=>{"dark"===q?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("lastoTheme",q)},[q]),(0,a.useEffect)(()=>{H&&ei.current?.focus(),er&&eo.current?.focus()},[H,er]);let ed=(e,s)=>e.speakerNames&&void 0!==e.speakerNames[s]?e.speakerNames[s]:({A:"Rozmówca A",B:"Rozmówca B"})[s]||`Rozm\xf3wca ${s}`,em=async(e,s)=>{if(!z)return;let a={...z,speakerNames:{...z.speakerNames,[e]:s}};C(e=>e.map(e=>e.id===z.id?a:e)),S(a),await y(a)},eh=e=>{U(e),W(!0)},ep=async()=>{if(R){O(!0);try{await v(R);let e=f.filter(e=>e.id!==R);if(C(e),z?.id===R&&S(null),W(!1),U(null),k){let s=N(e);await fetch(`https://getpantry.cloud/apiv1/pantry/${k.trim()}/basket/lastoHistory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chunk_0:s.slice(0,50),manifest:{totalChunks:Math.ceil(s.length/50),timestamp:Date.now()}})})}}catch(e){console.error(e)}finally{O(!1)}}},eu=async()=>{O(!0);try{(await x()).transaction(j,"readwrite").objectStore(j).clear(),C([]),S(null),ec(!1),k&&await fetch(`https://getpantry.cloud/apiv1/pantry/${k.trim()}/basket/lastoHistory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chunk_0:[],manifest:{totalChunks:0,timestamp:Date.now()}})}),J({isOpen:!0,title:"Gotowe",message:"Wszystkie nagrania zostały usunięte."})}catch(e){console.error(e)}finally{O(!1)}},ej=async()=>{if(!z||!G.trim())return void F(!1);let e={...z,title:G};C(s=>s.map(s=>s.id===z.id?e:s)),S(e),F(!1),await y(e)},ex=async e=>{if(k)try{let s=N(e);await fetch(`https://getpantry.cloud/apiv1/pantry/${k.trim()}/basket/lastoHistory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chunk_0:s.slice(0,50),manifest:{totalChunks:Math.ceil(s.length/50),timestamp:Date.now()}})})}catch(e){console.error("Auto-backup failed",e)}},ey=async(s,a)=>{let t=setInterval(async()=>{try{let n=await fetch(`https://api.assemblyai.com/v2/transcript/${s}`,{headers:{Authorization:e}});if(!n.ok)return;let l=await n.json();if("completed"===l.status){clearInterval(t);let e=`${s}-${Date.now()}`,n={id:e,title:a,date:new Date().toISOString(),content:l.text,utterances:l.utterances,speakerNames:{A:"Rozmówca A",B:"Rozmówca B"}};await y(n),C(a=>{if(a.some(a=>a.id===e||a.id.startsWith(s)))return a;let t=[n,...a];return setTimeout(()=>ex(t),500),t}),S(n),O(!1),I("")}else"error"===l.status&&(clearInterval(t),I("Błąd AI"),O(!1))}catch(e){clearInterval(t),O(!1)}},3e3)},eg=async s=>{if(e){O(!0),I("Wysyłanie...");try{let a=await fetch("https://api.assemblyai.com/v2/upload",{method:"POST",headers:{Authorization:e},body:s}),{upload_url:t}=await a.json();I("Przetwarzanie AI...");let n=await fetch("https://api.assemblyai.com/v2/transcript",{method:"POST",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify({audio_url:t,language_code:"pl",speaker_labels:!0})}),{id:l}=await n.json();ey(l,s.name)}catch(e){I("Błąd połączenia"),setTimeout(()=>O(!1),3e3)}}},ev=async()=>{if(!k||!e)return void J({isOpen:!0,title:"Brak kluczy",message:"Upewnij się, że wpisałeś oba klucze w ustawieniach."});O(!0);try{let e=N(f);for(let s=0;s<e.length;s+=50)await fetch(`https://getpantry.cloud/apiv1/pantry/${k.trim()}/basket/lastoHistory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({[`chunk_${Math.floor(s/50)}`]:e.slice(s,s+50),manifest:{totalChunks:Math.ceil(e.length/50),timestamp:Date.now()}})});el(!0),es(!0),setTimeout(()=>{el(!1),es(!1)},2e3)}catch(e){J({isOpen:!0,title:"Błąd",message:e.message})}finally{O(!1)}},eN=async()=>{if(k){O(!0);try{let e=await fetch(`https://getpantry.cloud/apiv1/pantry/${k.trim()}/basket/lastoHistory`,{method:"GET"});if(!e.ok)throw Error("Nie znaleziono danych.");let s=await e.json(),a=[];if(s.manifest)for(let e=0;e<s.manifest.totalChunks;e++)s[`chunk_${e}`]&&(a=[...a,...s[`chunk_${e}`]]);if(a.length>0){let e=a.map(e=>{let s=e.u?.map(e=>({speaker:e.s,text:e.t}))||[],a=s.map(e=>e.text).join("\n");return{id:e.id,title:e.ti,date:e.da,content:e.c||a,utterances:s,speakerNames:e.sn}});C(s=>{let a=e.filter(e=>!s.some(s=>s.id===e.id));return(et(!0),setTimeout(()=>et(!1),2e3),0===a.length)?s:(a.forEach(async e=>await y(e)),[...a,...s].sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime()))}),P(!1)}}catch(e){J({isOpen:!0,title:"Błąd",message:e.message})}finally{O(!1)}}},eb=e=>e.utterances&&0!==e.utterances.length?e.utterances.filter((e,s)=>!((e,s)=>{let a=["prosimy","poczekać","zawiesił","połączenie","kontynuować","wkrótce","rozmowę","będziesz","mógł","oczekiwanie"],t=e.toLowerCase();if(s<2)return a.some(e=>t.includes(e));let n=0;return a.forEach(e=>{t.includes(e)&&n++}),n>=3})(e.text,s)).map(s=>{let a="A"===s.speaker||"1"===s.speaker?"A":"B";return`${ed(e,a).toUpperCase()}:
${s.text}
`}).join("\n"):e.content;return(0,s.jsxs)("main",{className:"flex h-screen bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 overflow-hidden font-sans transition-colors duration-300",children:[(0,s.jsx)("div",{className:`lasto-sidebar ${L?"sidebar-open":"sidebar-closed"}`,children:(0,s.jsxs)("div",{className:"sidebar-content",children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsx)("h2",{onClick:()=>$(!1),className:"text-2xl font-light tracking-tight cursor-pointer",children:"Archiwum"}),(0,s.jsx)("button",{onClick:()=>$(!1),className:"text-gray-300 hover:text-black dark:hover:text-white cursor-pointer transition-colors",children:(0,s.jsx)(t,{})})]}),(0,s.jsxs)("div",{className:"sidebar-actions-grid",children:[(0,s.jsxs)("button",{onClick:eN,disabled:!k||B,className:`btn-action-base ${ea?"btn-status-success":"btn-pobierz"}`,children:[!ea&&(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),(0,s.jsx)("span",{children:ea?"Pobrano":"Pobierz"})]}),(0,s.jsxs)("button",{onClick:ev,disabled:!k||B,className:`btn-action-base ${en?"btn-status-success":"btn-wyslij"}`,children:[!en&&(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),(0,s.jsx)("span",{children:en?"Wysłano":"Wyślij"})]})]}),(0,s.jsx)("div",{className:"archive-list",children:f.map(e=>(0,s.jsxs)("button",{onClick:()=>{S(e),window.innerWidth<768&&$(!1)},className:`archive-item ${z?.id===e.id?"archive-item-active":""}`,children:[(0,s.jsx)("div",{onClick:s=>{s.stopPropagation(),eh(e.id)},className:"archive-delete-btn",children:(0,s.jsx)(c,{})}),(0,s.jsx)("div",{className:"archive-item-title",children:e.title}),(0,s.jsx)("div",{className:"archive-item-date",children:new Date(e.date).toLocaleString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},e.id))}),f.length>0&&(0,s.jsx)("div",{className:"sidebar-footer",children:(0,s.jsxs)("button",{onClick:()=>ec(!0),className:"btn-clear-archive",children:[(0,s.jsx)(o,{}),(0,s.jsx)("span",{children:"Wyczyść Archiwum"})]})})]})}),(0,s.jsxs)("div",{className:`lasto-main-panel ${L?"panel-shifted":""}`,children:[(0,s.jsxs)("div",{className:"top-bar",children:[(0,s.jsxs)("div",{className:"top-bar-left",children:[!L&&(0,s.jsx)("button",{onClick:()=>$(!0),className:"icon-button",children:(0,s.jsx)(n,{})}),z&&(0,s.jsx)("button",{onClick:()=>S(null),className:"btn-logo",children:"Lasto"})]}),(0,s.jsx)("button",{onClick:()=>P(!0),className:"settings-trigger",children:(0,s.jsx)(l,{})})]}),(0,s.jsx)("div",{className:"workspace-area",children:z?(0,s.jsxs)("div",{className:"editor-container",children:[(0,s.jsx)("div",{className:"editor-header",children:V?(0,s.jsxs)("div",{className:"title-edit-mode",children:[(0,s.jsx)("input",{className:"title-input",value:G,onChange:e=>Z(e.target.value),onKeyDown:e=>"Enter"===e.key&&ej(),autoFocus:!0}),(0,s.jsx)("button",{onClick:ej,className:"btn-confirm",children:(0,s.jsx)(r,{})})]}):(0,s.jsxs)("div",{className:"title-view-mode",children:[(0,s.jsx)("button",{onClick:()=>eh(z.id),className:"btn-delete-record",children:(0,s.jsx)(o,{})}),(0,s.jsxs)("div",{className:"title-clickable",onClick:()=>{Z(z.title),F(!0)},children:[(0,s.jsx)("h1",{className:"title-text",children:z.title}),(0,s.jsx)("span",{className:"edit-indicator",children:(0,s.jsx)(i,{})})]}),(0,s.jsxs)("button",{onClick:ev,disabled:!k||B,className:`btn-save-cloud ${ee?"btn-status-success":""}`,children:[B?(0,s.jsx)("div",{className:"loader-spin-xs"}):!ee&&(0,s.jsx)(p,{}),(0,s.jsx)("span",{children:ee?"Zapisano":"Zapisz"})]})]})}),(0,s.jsxs)("div",{className:"speaker-names-grid",children:[(0,s.jsx)("input",{className:"speaker-field",value:ed(z,"A"),onChange:e=>em("A",e.target.value),placeholder:"Osoba A"}),(0,s.jsx)("input",{className:"speaker-field",value:ed(z,"B"),onChange:e=>em("B",e.target.value),placeholder:"Osoba B"})]}),(0,s.jsx)("textarea",{className:"transcript-editor",value:eb(z),readOnly:!0}),(0,s.jsx)("div",{className:"editor-footer",children:(0,s.jsxs)("button",{onClick:()=>{z&&(navigator.clipboard.writeText(eb(z)),X(!0),setTimeout(()=>X(!1),2e3))},className:`btn-copy ${Q?"btn-status-success":""}`,children:[!Q&&(0,s.jsx)(u,{}),(0,s.jsx)("span",{children:Q?"Skopiowano":"Kopiuj tekst"})]})})]}):(0,s.jsxs)("div",{className:"hero-container",children:[(0,s.jsxs)("div",{className:"hero-content",children:[(0,s.jsx)("div",{className:"hero-title",children:"Lasto"}),(0,s.jsxs)("div",{className:"hero-subtitle",children:[(0,s.jsx)("span",{children:"Słuchaj"})," ",(0,s.jsx)("span",{className:"rune-divider",children:"ᛟ"}),(0,s.jsx)("span",{children:"Nagraj"})," ",(0,s.jsx)("span",{className:"rune-divider",children:"ᛟ"}),(0,s.jsx)("span",{children:"Pisz"})]})]}),(0,s.jsx)("div",{className:"import-zone",children:B?(0,s.jsxs)("div",{className:"loader-container",children:[(0,s.jsx)("div",{className:"loader-spin"}),(0,s.jsx)("span",{className:"loader-text",children:D||A||"Przetwarzanie..."})]}):e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{onDragOver:e=>{e.preventDefault(),E(!0)},onDragLeave:()=>E(!1),onDrop:s=>{s.preventDefault(),E(!1);let a=s.dataTransfer.files?.[0];a&&e&&eg(a)},className:`btn-import ${K?"import-dragging":""}`,children:[K?"Upuść tutaj!":"Importuj nagranie",(0,s.jsx)("input",{type:"file",className:"hidden",accept:"audio/*",onChange:e=>{let s=e.target.files?.[0];s&&eg(s)}})]}),(0,s.jsx)("p",{className:"format-hint",children:"WAV • MP3 • M4A"})]}):(0,s.jsx)("button",{onClick:()=>P(!0),className:"btn-primary",children:"Dodaj pierwsze nagranie"})})]})}),(0,s.jsxs)("div",{className:"main-footer",children:[(0,s.jsxs)("div",{className:"auto-save-indicator",children:[(0,s.jsx)("div",{className:"status-dot"}),(0,s.jsx)("span",{children:"Auto-save on (DB)"})]}),(0,s.jsxs)("div",{className:"footer-signature",children:[(0,s.jsx)("span",{className:"italic",children:"Lasto beth nîn"}),(0,s.jsx)("span",{className:"rune-divider",children:"ᛟ"}),(0,s.jsx)("span",{children:"developed by Kamil Gąszowski"}),(0,s.jsx)("span",{className:"rune-divider",children:"ᛟ"}),(0,s.jsx)("span",{children:new Date().getFullYear()})]})]})]}),T&&(0,s.jsx)("div",{className:"settings-overlay",onClick:()=>P(!1),children:(0,s.jsxs)("div",{className:"settings-modal",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:()=>P(!1),className:"settings-close-btn",children:(0,s.jsx)(c,{})}),(0,s.jsxs)("div",{className:"guide-panel",children:[(0,s.jsx)("h3",{className:"guide-heading",children:"Przewodnik konfiguracji"}),(0,s.jsxs)("div",{className:"space-y-12",children:[(0,s.jsxs)("div",{className:"step-container",children:[(0,s.jsxs)("div",{className:"step-header",children:[(0,s.jsx)("span",{className:"step-number",children:"1"}),(0,s.jsx)("h4",{className:"step-title",children:"Transkrypcja (AssemblyAI)"})]}),(0,s.jsxs)("div",{className:"step-content",children:[(0,s.jsx)("p",{children:"Klucz API pozwala SI zamienić Twoje nagrania na tekst."}),(0,s.jsxs)("ul",{className:"list-disc space-y-3 pl-4 font-medium",children:[(0,s.jsxs)("li",{children:["Zarejestruj się na ",(0,s.jsx)("a",{href:"https://www.assemblyai.com/",target:"_blank",className:"step-link",children:"assemblyai.com"})]}),(0,s.jsxs)("li",{children:["Wejdź do ",(0,s.jsx)("span",{className:"highlight-text",children:"Dashboard"})," i skopiuj ",(0,s.jsx)("span",{className:"highlight-text",children:"Your API Key"})]})]})]})]}),(0,s.jsxs)("div",{className:"step-container",children:[(0,s.jsxs)("div",{className:"step-header",children:[(0,s.jsx)("span",{className:"step-number",children:"2"}),(0,s.jsx)("h4",{className:"step-title",children:"Synchronizacja (Pantry)"})]}),(0,s.jsxs)("div",{className:"step-content",children:[(0,s.jsx)("p",{children:"Pantry ID chroni historię przed wyczyszczeniem danych przeglądarki."}),(0,s.jsxs)("ul",{className:"list-disc space-y-3 pl-4 font-medium",children:[(0,s.jsxs)("li",{children:["Wejdź na ",(0,s.jsx)("a",{href:"https://getpantry.cloud/",target:"_blank",className:"step-link",children:"getpantry.cloud"})]}),(0,s.jsx)("li",{children:"ID znajdziesz w Dashboardzie po stworzeniu nowej Spiżarni."})]})]})]})]})]}),(0,s.jsxs)("div",{className:"form-panel",children:[(0,s.jsx)("h3",{className:"settings-heading",children:"Ustawienia"}),(0,s.jsxs)("div",{className:"space-y-12",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"settings-label",children:"Wygląd"}),(0,s.jsxs)("div",{className:"theme-switcher",children:[(0,s.jsxs)("button",{onClick:()=>Y("light"),className:`theme-btn ${"light"===q?"theme-btn-active":""}`,children:[(0,s.jsx)(d,{}),(0,s.jsx)("span",{children:"Jasny"})]}),(0,s.jsxs)("button",{onClick:()=>Y("dark"),className:`theme-btn ${"dark"===q?"theme-btn-active":""}`,children:[(0,s.jsx)(m,{}),(0,s.jsx)("span",{children:"Ciemny"})]})]})]}),(0,s.jsx)("form",{className:"space-y-8",onSubmit:e=>{e.preventDefault(),P(!1)},children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{className:"input-label",children:"AssemblyAI Key"}),(0,s.jsx)("input",{type:"password",name:"assembly-key",autoComplete:"current-password",className:"settings-input",value:e,onChange:e=>{b(e.target.value),localStorage.setItem("assemblyAIKey",e.target.value)}})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{className:"input-label",children:"Pantry ID"}),(0,s.jsx)("input",{type:"text",name:"username",value:"LastoUser",autoComplete:"username",className:"hidden",readOnly:!0}),(0,s.jsx)("input",{type:"password",name:"password",autoComplete:"current-password",className:"settings-input",value:k,onChange:e=>{w(e.target.value),localStorage.setItem("pantryId",e.target.value)}})]})]})}),(0,s.jsxs)("div",{className:"backup-section",children:[(0,s.jsx)("label",{className:"settings-label",children:"Backup kluczy"}),(0,s.jsxs)("div",{className:"backup-grid",children:[(0,s.jsx)("button",{onClick:()=>{let s=new Blob([JSON.stringify({assemblyAIKey:e,pantryId:k},null,2)],{type:"application/json"}),a=URL.createObjectURL(s),t=document.createElement("a");t.download="lasto_keys_backup.json",t.href=a,t.click(),URL.revokeObjectURL(a)},className:"btn-backup",children:"Zapisz do pliku"}),(0,s.jsxs)("label",{className:"btn-backup",children:["Wczytaj plik",(0,s.jsx)("input",{type:"file",className:"hidden",accept:".json",onChange:e=>{let s=e.target.files?.[0];if(!s)return;let a=new FileReader;a.onload=e=>{try{let s=JSON.parse(e.target?.result);(s.assemblyAIKey||s.pantryId)&&(s.assemblyAIKey&&(b(s.assemblyAIKey),localStorage.setItem("assemblyAIKey",s.assemblyAIKey)),s.pantryId&&(w(s.pantryId),localStorage.setItem("pantryId",s.pantryId)),J({isOpen:!0,title:"Sukces",message:"Klucze zostały zaimportowane."}))}catch(e){J({isOpen:!0,title:"Błąd",message:"Nieprawidłowy format pliku."})}},a.readAsText(s)}})]})]})]}),(0,s.jsx)("button",{onClick:()=>P(!1),className:"btn-submit",children:"Gotowe"})]})]})]})}),H&&(0,s.jsx)("div",{ref:ei,className:"modal-backdrop",onClick:()=>W(!1),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),ep()),"Escape"===e.key&&W(!1)},tabIndex:-1,children:(0,s.jsxs)("div",{className:"modal-box",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"modal-icon-wrapper icon-theme-red",children:(0,s.jsx)(o,{})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"modal-title-sm",children:"Usunąć nagranie?"}),(0,s.jsx)("p",{className:"modal-desc",children:"Tej operacji nie można cofnąć."})]}),(0,s.jsxs)("div",{className:"modal-actions-row",children:[(0,s.jsx)("button",{onClick:()=>W(!1),className:"btn-modal-cancel",children:"Anuluj"}),(0,s.jsx)("button",{onClick:ep,className:"btn-modal-delete",children:"Usuń (Enter)"})]})]})}),er&&(0,s.jsx)("div",{ref:eo,className:"modal-backdrop-high",onClick:()=>ec(!1),onKeyDown:e=>{"Enter"===e.key&&eu(),"Escape"===e.key&&ec(!1)},tabIndex:-1,children:(0,s.jsxs)("div",{className:"modal-box",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"modal-icon-wrapper icon-theme-danger",children:(0,s.jsx)(o,{})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"modal-title-bold",children:"Usunąć wszystko?"}),(0,s.jsx)("p",{className:"modal-desc",children:"Stracisz bezpowrotnie wszystkie nagrania lokalne i w chmurze Pantry."})]}),(0,s.jsxs)("div",{className:"modal-actions-col",children:[(0,s.jsx)("button",{onClick:eu,className:"btn-modal-delete-all",children:"Tak, usuń wszystko (Enter)"}),(0,s.jsx)("button",{onClick:()=>ec(!1),className:"btn-modal-cancel-text",children:"Anuluj (Esc)"})]})]})}),_.isOpen&&(0,s.jsx)("div",{className:"modal-backdrop-light",onClick:()=>J({..._,isOpen:!1}),children:(0,s.jsxs)("div",{className:"modal-box space-y-6",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"modal-icon-wrapper icon-theme-neutral",children:(0,s.jsx)(h,{})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"modal-title-sm",children:_.title}),(0,s.jsx)("p",{className:"modal-desc",children:_.message})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)("button",{onClick:()=>J({..._,isOpen:!1}),className:"btn-modal-ok",children:"OK"})})]})})]})}e.s(["default",()=>b],31713)}]);